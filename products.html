<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Products - Pixaura</title>
    <link rel="stylesheet" href="CSS/product.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="icon" href="assets/favicon.png" type="image/png" />
</head>
<body>
    <nav class="navbar">
        <div class="logo">
            <a href="index.html">
                <img src="assets/logo.png" alt="Pixaura Logo" />
            </a>
        </div>
        <div class="nav-links">
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <span id="cart-count" class="cart-icon">
                <i class="fa-solid fa-cart-shopping"></i>
                <span class="cart-badge">0</span>
            </span>
            <span id="profile-name" class="profile-name"></span>
            <button onclick="logout()" class="logout-btn">Logout</button>
        </div>
    </nav>

    <div id="login-form" class="login-form">
        <h2>Login to Pixaura</h2>
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <button onclick="login()" class="login-btn">Login</button>
        <button type="button" onclick="googleLogin()" class="login-btn" style="background:#4285F4;margin-top:10px;">
            <i class="fa-brands fa-google"></i> Login with Google
        </button>
        <p>Don't have an account? <button type="button" onclick="showSignup()" class="link-btn">Sign up</button></p>
    </div>

    <div id="signup-form" class="login-form hidden">
        <h2>Create Account</h2>
        <input type="text" id="signup-name" placeholder="Full Name" required>
        <input type="email" id="signup-email" placeholder="Email" required>
        <input type="password" id="signup-password" placeholder="Password" required>
        <button onclick="signup()" class="signup-btn">Sign Up</button>
        <p>Already have an account? <button type="button" onclick="showLogin()" class="link-btn">Login</button></p>
    </div>

    <div id="product-container" class="product-container hidden"></div>

    <div id="cart-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Your Cart <i class="fa-solid fa-cart-shopping"></i></h2>
            <div id="cart-items"></div>
            <div id="cart-total"></div>
            <div class="cart-buttons">
                <button type="button" onclick="openBuyForm()" class="buy-btn">Buy Now</button>
                <button type="button" onclick="closeCart()" class="close-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="buyFormPopup" class="modal hidden">
        <div class="modal-content">
            <h3>Enter Shipping Details</h3>
            <form id="orderForm">
                <input type="text" id="fullName" placeholder="Full Name" required>
                <input type="text" id="address" placeholder="Address" required>
                <input type="text" id="city" placeholder="City" required>
                <input type="text" id="state" placeholder="State" required>
                <input type="text" id="pincode" placeholder="Pincode" required>
                <input type="tel" id="phone" placeholder="Phone Number" required>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">Place Order</button>
                    <button type="button" onclick="closeBuyForm()" class="close-btn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <div id="product-detail"></div>

    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
    <script src="JS/product.js"></script>
    <script>
    // Firebase config (same as your main JS)
    const firebaseConfig = {
        apiKey: "AIzaSyDvuETPdTeZsDasgOw7MW59IrsmeOQP7kk",
        authDomain: "chat-web-23e9c.firebaseapp.com",
        projectId: "chat-web-23e9c",
        storageBucket: "chat-web-23e9c.appspot.com",
        messagingSenderId: "90729782128",
        appId: "1:90729782128:web:b051229c6c45866a87cdb5"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Get product id from URL
    const params = new URLSearchParams(window.location.search);
    const productId = params.get('id');

    // Fetch and show product
    db.collection("products").doc(productId).get().then(doc => {
        if (!doc.exists) {
            document.getElementById('product-detail').innerHTML = "Product not found!";
            return;
        }
        const data = doc.data();
        let imagesHtml = "";
        if (Array.isArray(data.image)) {
            imagesHtml = data.image.map(url => `<img src="${url}" style="max-width:200px;margin:5px;">`).join('');
        } else {
            imagesHtml = `<img src="${data.image}" style="max-width:200px;">`;
        }
        document.getElementById('product-detail').innerHTML = `
            <h2>${data.name}</h2>
            <div>${imagesHtml}</div>
            <p><b>Price:</b> â‚¹${data.price}</p>
            <p><b>Description:</b> ${data.description || ""}</p>
        `;
    });

    function renderProductCard(data) {
        const imgUrl = Array.isArray(data.image) ? data.image[0] : data.image;
        // ...rest of the code
    }
    </script>
</body>
</html>